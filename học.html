<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý giờ học</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            color: #333;
        }

        .container {
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
        }

        header {
            background-color: #4CAF50;
            color: white;
            padding: 20px;
            border-radius: 8px;
        }

        header h1 {
            font-size: 2rem;
        }

        header p {
            font-size: 1.2rem;
        }

        .pomodoro-timer {
            margin-top: 40px;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .pomodoro-timer h2 {
            font-size: 1.5rem;
            margin-bottom: 20px;
        }

        #timer-display {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1rem;
            cursor: pointer;
            margin: 5px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #45a049;
        }

        footer {
            margin-top: 40px;
            font-size: 0.9rem;
            color: #777;
        }

        #AOD {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: black;
            display: flex;
            justify-content: center; /* Căn giữa ngang */
            align-items: center; /* Căn giữa dọc */
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif; /* Font Apple */
        }

        #countdown-container {
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 10px; /* Tạo khoảng cách nhẹ giữa 2 dòng */
        }

        #time-count-set {
            font-size: 15vw; /* Chữ to nhất */
            font-weight: 600; /* Đậm chuẩn Apple */
            letter-spacing: -2px; /* Giảm khoảng cách giữa số */
        }

        #now-set {
            font-size: 5vw; /* Nhỏ hơn một chút */
            font-weight: 400; /* Nhẹ hơn dòng trên */
            opacity: 0.8; /* Hiệu ứng mờ nhẹ */
        }
    </style>
</head>
<body>
    <button style="
        position: fixed;
        bottom: 20px;
        right: 20px;
        align-items: center;
        justify-content: center;
        cursor: pointer;" onclick="nghi_ngoi()" id="btn-sleep">Trình xem tối giản</button>
    <div style="
        position: fixed;
        display: none;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: black;
    " id="AOD">
        <div id="countdown-container">
            <h1 id="time-count-set">00:00:00</h1>
            <h1 id="now-set">Thứ Hai, 01 Tháng 01</h1>
        </div>

    </div>
    <div class="container" id="container">
        <header>
            <h1>Các sự kiện chính</h1>
            <br>
            <p id="say"></p>
            <br><hr><br>
            <p id="event_news"></p>
        </header>

        <div class="pomodoro-timer">
            <h2>Pomodoro Timer</h2>
            <p id="timer-display">25:00</p>
            <button id="start-btn">Bắt đầu học</button>
            <button id="reset-btn">Reset</button>
        </div>

        <div class="pomodoro-timer">
            <h2>Học tập hiệu quả hơn với Pomodoro</h2>
            <p>Phương pháp Pomodoro giúp bạn tập trung học tập trong khoảng thời gian ngắn, sau đó nghỉ ngơi để tái tạo năng lượng. Hãy sử dụng bộ đếm thời gian bên trên để bắt đầu học nhé!</p>
            <p>Cách sử dụng:</p>
            <ul style="text-align: left; display: inline-block; margin-top: 10px;">
                <li>Nhấn "Bắt đầu học" để bắt đầu phiên học 25 phút.</li>
                <li>Khi đồng hồ đếm ngược về 0, bạn sẽ nhận được thông báo để nghỉ ngơi.</li>
                <li>Nhấn "Reset" để đặt lại đồng hồ về 25:00.</li>
                <li>Sau mỗi phiên học, hãy nghỉ ngơi từ 5-10 phút trước khi bắt đầu phiên tiếp theo.</li>
            </ul>
            <p>Chúc bạn học tập hiệu quả!</p>
        </div>

        <div class="pomodoro-timer">
            <h2>To-do List của tuần</h2>
            <input type="text" id="todo-input" placeholder="Thêm việc cần làm..." style="padding: 10px; width: 70%; border-radius: 5px; border: 1px solid #ccc;">
            <button id="add-todo-btn" style="padding: 10px 20px; border-radius: 5px; border: none; background-color: #4CAF50; color: white; cursor: pointer;">Thêm</button>
            <ul id="todo-list" style="list-style-type: none; margin-top: 20px; text-align: left;"></ul>
        </div>

        <div class="pomodoro-timer">
            <h2>Dự báo thời tiết</h2>
            <a class="weatherwidget-io" href="https://forecast7.com/en/21d03105d83/hanoi/" data-label_1="Ha Noi" data-label_2="Viet Nam" data-icons="Climacons Animated" data-theme="sky" data-highcolor="#ffffff" data-lowcolor="#ffffff" data-snowcolor="#c7c3c3" >Ha Noi Viet Nam</a>
        </div>
        
        <div class="pomodoro-timer">
            <h2>Đừng quên chỉ còn:</h2>
            <h1 id="countdown"></h1>
            <br>
            <strong id="time-conut"></strong>
        </div>

        <div class="pomodoro-timer">
            <h1 id="say-time"></h1>
            <h2></h2>
            <p id="talk"></p>
            <br>
            <h3 id="say-now"></h3>
        </div>

        <div class="pomodoro-timer">
            <h2>Hộp toán học</h2>
            <h3>Nhập phép tính</h3>
            <br><hr><br>
            <input type="text" id="math-input" placeholder="Nhập phép tính" style="padding: 10px; width: 80%; border-radius: 5px; border: 1px solid #ccc;">
            <p id="math-result" style="margin-top: 20px; font-size: 1.2rem; color: #4CAF50;"></p>
            <button onclick="document.getElementById('math-result').textContent = 'Kết quả: ' + (Math.floor(Math.random() * 6) + 1);">Tung xúc xắc</button>
            <button onclick="document.getElementById('math-result').textContent = 'Kết quả: ' + (Math.random() < 0.5 ? 'Mặt sấp' : 'Mặt ngửa');">Tung đồng xu</button>
            <script>
                document.getElementById('math-input').addEventListener('keypress', function(event) {
                    if (event.key === 'Enter') {
                        let expression = event.target.value;
                        try {
                            let result = eval(expression);
                            document.getElementById('math-result').textContent = `Kết quả: ${result}`;
                        } catch (e) {
                            document.getElementById('math-result').textContent = 'Công thức không hợp lệ!';
                        }
                    }
                });
            </script>
        </div>

        <div class="pomodoro-timer">
            <h2>Ghi chú nhanh</h2>
            <textarea id="quick-note" placeholder="Viết ghi chú của bạn ở đây..." style="width: 100%; height: 100px; padding: 10px; border-radius: 5px; border: 1px solid #ccc; "></textarea>
            <button onclick="localStorage.setItem('quickNote', document.getElementById('quick-note').value); alert('Ghi chú đã được lưu!');" style="margin-top: 10px;">Lưu Ghi Chú</button>
            <button onclick="document.getElementById('quick-note').value = localStorage.getItem('quickNote') || '';" style="margin-top: 10px;">Tải Ghi Chú</button>
        </div>

        <footer>
            <p>© 2025 Trang Web Học Tập Tập Trung</p>
        </footer>
    </div>

    <script>
        let timerDisplay = document.getElementById("timer-display");
        let startBtn = document.getElementById("start-btn");
        let resetBtn = document.getElementById("reset-btn");
        let say = document.getElementById("say");
        let event_news = document.getElementById("event_news");

        let timer;
        let isRunning = false;
        let timeLeft = 25 * 60; // 25 phút
        let sayst = [
            "Học, học nữa, học mãi. - Hồ Chí Minh",
            "Học không bao giờ là đủ. - Khuyết danh",
            "Trí tuệ không phải sản phẩm của trường lớp, mà là kết quả của nỗ lực học hỏi suốt đời. - Albert Einstein",
            "Con đường đến thành công là con đường của sự học tập, sự phát triển và không ngừng cố gắng. - Oprah Winfrey",
            "Học là một hành trình, không phải là đích đến. - Khuyết danh",
            "Học để biết, học để làm, học để chung sống, học để tự khẳng định mình. - UNESCO"
        ]

        let day_week = new Date().getDay()

        if (day_week == 0 || day_week == 6) {
            event_news.innerHTML = "Hôm nay là cuối tuần, hãy nghỉ ngơi và thư giãn nhé!";
        } else if (day_week == 1) {
            event_news.innerHTML = "Hôm nay là Thứ Hai, bạn học Vật Lý, KTPL và HDTN nhé! Hãy soạn sách đầy đủ và chuẩn bị bài";
        } else if (day_week == 2) {
            event_news.innerHTML = "Hôm nay là Thứ Ba, bạn học Ngoại Ngữ, Tin Học và Toán";
        } else if (day_week == 3) {
            event_news.innerHTML = "Hôm nay là Thứ Tư, hãy chuẩn bị dậy sớm học môn Quốc Phòng An Ninh, Thể chất và chiều học môn Văn, Ngoại Ngữ và chill với HDTN";
        } else if (day_week == 4) {
            event_news.innerHTML = "Hôm nay là Thứ Năm, hãy cẩn thận môn GDDP, chuẩn bị môn Toán và 2 tiết Sử nhé!";
        } else if (day_week == 5) {
            event_news.innerHTML = "Hôm nay là Thứ Sáu, cũng sắp cuối tuần. Bạn có Địa Lý, 2 tiết Văn và chuyển đề văn, và môn sinh hoạt lớp (Có thể học Anh). Chuẩn bị tốt nhé";
        }

        function getRandom(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        let randomNum = getRandom(0, 5);

        document.getElementById("say").innerHTML = sayst[randomNum]

        // Chuyển thời gian từ giây sang phút:giây
        function formatTime(seconds) {
            let minutes = Math.floor(seconds / 60);
            let secondsLeft = seconds % 60;
            return `${minutes < 10 ? '0' : ''}${minutes}:${secondsLeft < 10 ? '0' : ''}${secondsLeft}`;
        }

        // Bắt đầu hoặc dừng hẹn giờ
        function startTimer() {
            if (isRunning) {
                clearInterval(timer);
                isRunning = false;
                startBtn.textContent = "Bắt đầu";
            } else {
                timer = setInterval(function() {
                    timeLeft--;
                    timerDisplay.textContent = formatTime(timeLeft);
                    if (timeLeft === 0) {
                        clearInterval(timer);
                        alert("Hết giờ! Đã đến lúc nghỉ ngơi.");
                        resetTimer();
                    }
                }, 1000);
                isRunning = true;
                startBtn.textContent = "Dừng";
            }
        }

        // Đặt lại hẹn giờ
        function resetTimer() {
            timeLeft = 25 * 60;
            timerDisplay.textContent = formatTime(timeLeft);
            if (isRunning) {
                clearInterval(timer);
                isRunning = false;
                startBtn.textContent = "Bắt đầu";
            }
        }

        // Gán sự kiện cho nút
        startBtn.addEventListener("click", startTimer);
        resetBtn.addEventListener("click", resetTimer);

        let targetDate = new Date('2026-02-17T00:00:00');

        function updateCountdown() {
            let now = new Date();
            let timeDifference = targetDate - now;

            // Tính toán số ngày, giờ, phút và giây còn lại
            let days = Math.floor(timeDifference / (1000 * 60 * 60 * 24));
            let hours = Math.floor((timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            let minutes = Math.floor((timeDifference % (1000 * 60 * 60)) / (1000 * 60));
            let seconds = Math.floor((timeDifference % (1000 * 60)) / 1000);

            // Hiển thị kết quả
            document.getElementById("countdown").innerHTML = days + " ngày"
            document.getElementById("time-conut").innerHTML =  hours + " giờ " + minutes + " phút " + seconds + " giây ";

            // Nếu đã tới ngày tháng 6, dừng đếm
            if (timeDifference <= 0) {
                clearInterval(interval);
                document.getElementById("countdown").innerHTML = "Đã đến Tháng 6 rồi!";
            }
        }

        // Cập nhật mỗi giây
        let interval = setInterval(updateCountdown, 1000);

        function timesay() {
            let now = new Date();
            let hh = now.getHours();
            let mm = now.getMinutes();

            let time = hh + ":" + mm;
            hh = hh < 10 ? '0' + hh : hh;
            mm = mm < 10 ? '0' + mm : mm;

            time = "Giờ là " + hh + ":" + mm;
            document.getElementById("say-now").innerHTML = time;
            document.getElementById("now-set").innerHTML = hh + ":" + mm;

            if (hh >= 0 && hh <= 2) { 
                document.getElementById("say-time").innerHTML = "Chào buổi đêm";
                document.getElementById("talk").innerHTML = "Giờ đã rất khuya rồi, bạn nên đi ngủ đi!";
            } else if (hh >= 3 && hh <= 4) {
                document.getElementById("say-time").innerHTML = "Bạn nên đi ngủ";
                document.getElementById("talk").innerHTML = "Hiện tại đã gần sáng, bạn nên đi ngủ ngay lập tức!";
            } else if (hh >= 5 && hh <= 6) {
                document.getElementById("say-time").innerHTML = "Chào buổi sáng sớm";
                document.getElementById("talk").innerHTML = "Bạn dậy sớm đó! Hãy bắt đầu ngày học mới.";
            } else if (hh >= 7 && hh <= 9) {
                document.getElementById("say-time").innerHTML = "Chào buổi sáng";
                document.getElementById("talk").innerHTML = "Hôm nay bạn có nhiều bài không? Nếu có hãy tranh thủ làm!";
            } else if (hh >= 10 && hh <= 12) {
                document.getElementById("say-time").innerHTML = "Chào buổi trưa";
                document.getElementById("talk").innerHTML = "Sắp tới giờ cơm trưa rồi, hãy ăn trưa, nghỉ ngơi để chiều học tiếp nhé!";
            } else if (hh >= 13 && hh <= 15) {
                document.getElementById("say-time").innerHTML = "Chào buổi trưa chiều";
                document.getElementById("talk").innerHTML = "Bạn vẫn đang học hả? Hãy giữ tiến độ nhé!";
            } else if (hh >= 16 && hh <= 17) {
                document.getElementById("say-time").innerHTML = "Chào buổi chiều";
                document.getElementById("talk").innerHTML = "Hãy thư giãn vài phút, sau đó quay lại học sau để nghỉ ngơi đầu óc, ăn nhẹ cái gì đó!";
            } else if (hh >= 18 && hh <= 19) {
                document.getElementById("say-time").innerHTML = "Chào buổi tối";
                document.getElementById("talk").innerHTML = "Hiện là giờ cơm đúng không? Tranh thủ ăn nhanh còn học.";
            } else if (hh >= 20 && hh <= 22) {
                document.getElementById("say-time").innerHTML = "Chào buổi tối";
                document.getElementById("talk").innerHTML = "Hiện đang là thời điểm lý tưởng để học, hãy học nhé!";
            } else if (hh == 23) {
                document.getElementById("say-time").innerHTML = "Chào buổi tối muộn";
                document.getElementById("talk").innerHTML = "Chuẩn bị ngủ sớm nhé!";
            }
        }
        timesay();
        setInterval(timesay, 1000);

        //

        let countdownInterval;

    function nghi_ngoi() {
        let settime = prompt("Bạn muốn học/nghỉ bao lâu? (Phút, nếu học khuyến cáo 25 phút, nghỉ nên từ 5 phút đến 15 phút)");
        let timeInMs = parseFloat(settime) * 60 * 1000; // Chuyển phút sang mili-giây
        let endTime = Date.now() + timeInMs; // Tính thời điểm kết thúc

        if (!(settime > 65 || settime <= 0)) {
            if (!isNaN(timeInMs) && timeInMs > 0) {
                alert(`OK! Hẹn bạn sau ${settime} phút.`);
                document.getElementById("AOD").style.display = "flex";
                document.getElementById("container").style.display = "none";

                // Xóa bộ đếm cũ nếu có
                if (countdownInterval) clearInterval(countdownInterval);

                countdownInterval = setInterval(() => {
                    let remainingTime = endTime - Date.now();
                    if (remainingTime <= 0) {
                        clearInterval(countdownInterval);
                        document.getElementById("AOD").style.display = "none";
                        alert("Hết giờ nghỉ! Quay lại làm việc thôi!");
                    } else {
                        let h = Math.floor(remainingTime / 3600000);
                        let m = Math.floor((remainingTime % 3600000) / 60000);
                        let s = Math.ceil((remainingTime % 60000) / 1000);
                        document.getElementById("time-count-set").innerHTML = `${String(h).padStart(2, "0")}:${String(m).padStart(2, "0")}:${String(s).padStart(2, "0")}`;
                    }
                }, 1000);
            } else {
                    alert("Vui lòng nhập một số hợp lệ!");
                    document.getElementById("AOD").style.display = "none";
            }
        } else {
            alert("Thời gian không hợp lý");
        }
    }

    document.addEventListener('DOMContentLoaded', (event) => {
    // Kích hoạt chế độ toàn màn hình khi trang đã tải xong
        const startFullScreen = () => {
            if (document.documentElement.requestFullscreen) {
                document.documentElement.requestFullscreen();
            } else if (document.documentElement.mozRequestFullScreen) { // Firefox
                document.documentElement.mozRequestFullScreen();
            } else if (document.documentElement.webkitRequestFullscreen) { // Chrome, Safari, Opera
                document.documentElement.webkitRequestFullscreen();
            } else if (document.documentElement.msRequestFullscreen) { // IE/Edge
                document.documentElement.msRequestFullscreen();
            }
        };

        // Chỉ gọi khi người dùng tương tác (ví dụ nhấn nút bắt đầu)
        document.getElementById('start-btn').addEventListener('click', () => {
            document.getElementById("btn-sleep").style.display = "none";
            startFullScreen();
        });
    });

        document.addEventListener('fullscreenchange', () => {
        if (!document.fullscreenElement) {
            check();
            // Hoặc thực hiện các hành động khác khi thoát chế độ toàn màn hình
        }
    });

    document.addEventListener('mozfullscreenchange', () => {
        if (!document.mozFullScreenElement) {
            check();
        }
    });

    // Chrome, Safari, Opera
    document.addEventListener('webkitfullscreenchange', () => {
        if (!document.webkitFullscreenElement) {
            check();
        }
    });

    // IE/Edge
    document.addEventListener('msfullscreenchange', () => {
        if (!document.msFullscreenElement) {
            check();
        }
    });

    function check() {
        if (timeLeft != 0) {
            alert("Bạn chưa hoàn thành thời gian học!");
        }
    }

    !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='https://weatherwidget.io/js/widget.min.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','weatherwidget-io-js');
    </script>

    <script>
        const input = document.getElementById('todo-input');
        const btn = document.getElementById('add-todo-btn');
        const list = document.getElementById('todo-list');

        // Lấy dữ liệu cũ từ localStorage
        let todos = JSON.parse(localStorage.getItem('todos')) || [];
        renderTodos();

        btn.addEventListener('click', addTodo);
        input.addEventListener('keypress', e => {
            if (e.key === 'Enter') addTodo();
        });

        function addTodo() {
            const text = input.value.trim();
            if (!text) return;

            if (todos.length >= 15) {
            alert('Chỉ được lưu tối đa 15 việc.');
            input.value = '';
            return;
            }

            todos.push({ text, done: false });
            saveTodos();
            renderTodos();
            input.value = '';
        }

        function renderTodos() {
            list.innerHTML = '';
            todos.forEach((todo, index) => {
            const li = document.createElement('li');
            li.style.margin = '10px 0';
            li.style.display = 'flex';
            li.style.alignItems = 'center';
            li.style.justifyContent = 'space-between';

            const span = document.createElement('span');
            span.textContent = todo.text;
            span.style.flex = '1';
            span.style.cursor = 'pointer';
            if (todo.done) span.style.textDecoration = 'line-through';

            const delBtn = document.createElement('button');
            delBtn.textContent = 'Xóa';
            delBtn.style.backgroundColor = '#f44336';
            delBtn.style.color = 'white';
            delBtn.style.border = 'none';
            delBtn.style.borderRadius = '5px';
            delBtn.style.padding = '5px 10px';
            delBtn.style.cursor = 'pointer';

            span.onclick = () => {
                todo.done = !todo.done;
                saveTodos();
                renderTodos();
            };

            delBtn.onclick = () => {
                todos.splice(index, 1);
                saveTodos();
                renderTodos();
            };

            li.appendChild(span);
            li.appendChild(delBtn);
            list.appendChild(li);
            });
        }

        function saveTodos() {
            localStorage.setItem('todos', JSON.stringify(todos));
        }
    </script>
</body>
</html>
